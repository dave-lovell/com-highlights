---
title: "Cleaning Census Data Table"
format: html
editor: visual
---

#### Libraries

```{r libs}
library(here)
```

## Reading in the Overall Table

```{r read in Overall Table}
overall_table <- readRDS(
  here("data", "intermediate", "census", "merged-data",
       "01_all-census-data_list_2022-10-12.RDS"
       ))

```

## Checking for NAs

```{r CheckNas}
is.na(overall_table)

is.na(com_tables)
```

## Cleaning of Com names

```{r Data Cleaning}
tolower(com_names_list)
```

## Creating New Dataframe For nations from ComsList

```{r BreakdownComList}
northernIreland_com_tables <- com_tables[c("North-Belfast", "Newry")]
repIreland_com_tables <- com_tables[c("Cork", "Sligo", "Ballina")]
scotland_com_tables <- com_tables [c("West-Highlands", "Dundee", "A7", "Central-Fife")]
wales_com_tables <- com_tables [c("Llandaff", "Gwent-Valley", "Wrexham", "Cross-Hands", "Haverfordwest", "Llanelli")]
england_com_tables <- com_tables[c("Langley", "Blackpool", "Gloucester-and Forest", "Bradford-sorted", "Leeds", "Scunthorpe", "Liverpool", "Hackney", "Rochdale", "Medway", "Attercliffe-and-Darnall", "sheffield", "Greenwich", "North-Sutton", "Southampton", "Middlesborough", "Selby")]
```

## Removing Prefix

```{r remove all column prefix}

# remove_prefix <- function(northernIreland_com_tables, sep, regex = FALSE){
  
  if(!regex){ sep <- stringr::fixed(sep) } 
  
  sep_end <- stringr::str_locate(x, sep)[, "end"] 
  
  if(any(is.na(sep_end))){
    
    na_seps <- is.na(sep_end)
    sep_end[na_seps] <- 0
    
    for(i in na_seps) warning("Separator '", sep[i], "' not found in colunm name '", x , "'")
    }
  
  string_out <- str_sub(x, sep_end + 1)
  
  return(string_out)
# }
  

```

<<<<<<< HEAD
## Multiply
=======
## Multiply the Com Area proportion with other columns

```{r multiply across rows in all tables}
head("northernIreland_com_tables", n = 3)
print(overall_table, n = colnames(2))
multiplier <- matrix(overall_table)
multiplier[ , 2]
```
>>>>>>> 919a9b293b6dfc0f757c6e787c08d05714266b8e
